webpackJsonp([8],{41:function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _jsx2 = __webpack_require__(12);\n\nvar _jsx3 = _interopRequireDefault(_jsx2);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\n__webpack_require__(56);\n\nvar _antd = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Content = _antd.Layout.Content,\n    Footer = _antd.Layout.Footer;\n\n/**\n * @author wujingtao\n *\n * @desc CMS 配置页通用组件\n *\n * @date  2018年08月31日14:59:26\n */\n\nvar CMSHeader = function () {\n    function CMSHeader(props) {\n        //todo 设置入参\n        var children = props.children;\n\n        return (0, _jsx3.default)(_antd.Layout, {\n            style: { height: '100%' }\n        }, void 0, (0, _jsx3.default)(Content, {}, void 0, (0, _jsx3.default)('div', {}, void 0, children)));\n    }\n\n    return CMSHeader;\n}();\n\nexports.default = CMSHeader;\nmodule.exports = exports['default'];\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/CMSHeader.jsx\n// module id = 41\n// module chunks = 0 5 6 7 8\n\n//# sourceURL=webpack:///./components/CMSHeader.jsx?")},823:function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _extends2 = __webpack_require__(4);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _jsx2 = __webpack_require__(12);\n\nvar _jsx3 = _interopRequireDefault(_jsx2);\n\nvar _classCallCheck2 = __webpack_require__(1);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(3);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(2);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(9);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _sad = __webpack_require__(28);\n\nvar _sad2 = _interopRequireDefault(_sad);\n\nvar _CMSHeader = __webpack_require__(41);\n\nvar _CMSHeader2 = _interopRequireDefault(_CMSHeader);\n\nvar _antd = __webpack_require__(11);\n\nvar _moment = __webpack_require__(21);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RadioButton = _antd.Radio.Button;\nvar RadioGroup = _antd.Radio.Group;\nvar FormItem = _antd.Form.Item;\nvar RangePicker = _antd.DatePicker.RangePicker;\n\nvar _ref = (0, _jsx3.default)('label', {}, void 0, ' | ');\n\nvar _ref2 = (0, _jsx3.default)('a', {\n    href: '#'\n}, void 0, '\\u5220\\u9664');\n\nvar _ref3 = (0, _jsx3.default)(RadioButton, {\n    value: '1'\n}, void 0, '\\u5168\\u90E8');\n\nvar _ref4 = (0, _jsx3.default)(RadioButton, {\n    value: '2'\n}, void 0, '\\u751F\\u6548');\n\nvar _ref5 = (0, _jsx3.default)(RadioButton, {\n    value: '3'\n}, void 0, '\\u672A\\u751F\\u6548');\n\nvar _ref6 = (0, _jsx3.default)(RadioButton, {\n    value: '4'\n}, void 0, '\\u5DF2\\u8FC7\\u671F');\n\nvar _ref7 = (0, _jsx3.default)('label', {}, void 0, '\\u6807\\u9898\\uFF1A');\n\nvar _ref8 = (0, _jsx3.default)('label', {}, void 0, '\\u8DF3\\u8F6C\\u534F\\u8BAE\\u5730\\u5740\\uFF1A');\n\nvar _ref9 = (0, _jsx3.default)('label', {}, void 0, ' \\u56FE\\u7247\\uFF1A');\n\nvar _ref10 = (0, _jsx3.default)(_antd.Button, {}, void 0, (0, _jsx3.default)(_antd.Icon, {\n    type: 'upload'\n}), ' \\u4E0A\\u4F20\\u56FE\\u7247');\n\nvar _ref11 = (0, _jsx3.default)('label', {}, void 0, '\\u76EE\\u6807\\u7528\\u6237\\uFF1A');\n\nvar _ref12 = (0, _jsx3.default)('label', {}, void 0, ' \\u6709\\u6548\\u671F\\uFF1A');\n\nvar ActivityScreen = function (_SADPage) {\n    (0, _inherits3.default)(ActivityScreen, _SADPage);\n\n    /**\n     * @author wujingtao\n     *\n     * @desc 开屏配置展示页\n     *\n     * @date 2018年09月03日11:34:30\n     */\n\n    function ActivityScreen() {\n        (0, _classCallCheck3.default)(this, ActivityScreen);\n\n        //todo 设置初始弹窗的显示状态 以及初始数据\n        var _this = (0, _possibleConstructorReturn3.default)(this, _SADPage.call(this));\n\n        _this.onDelete = function (id) {\n            //todo 调用后端删除接口\n            _this.setState({\n                openId: id\n            }, function () {\n                return _this.delete();\n            });\n            location.reload(true);\n        };\n\n        _this.onEdit = function (id) {\n            //todo 调用后端回显接口\n            //todo 在setState时回调后端接口\n            _this.setState({\n                openId: id\n            }, function () {\n                return _this.edit();\n            });\n            setTimeout(function () {\n                var data = _this.state.editData;\n                var photo = _this.state.editData.photo;\n                _this.setState({\n                    operateType: '编辑',\n                    visible: true,\n                    title: data.title,\n                    protocol: data.protocol,\n                    url: data.url,\n                    targetUser: data.targetUser,\n                    startTime: data.startTime,\n                    endTime: data.endTime,\n                    fileList: [{\n                        uid: '-1',\n                        name: photo.name,\n                        status: photo.status,\n                        url: photo.url\n                    }],\n                    titlemsg: '',\n                    protocolmsg: '',\n                    fileListmsg: '',\n                    datemsg: ''\n                });\n            }, 500);\n        };\n\n        _this.addButton = function () {\n            _this.setState(function () {\n                return {\n                    operateType: '新增',\n                    title: '',\n                    protocol: '',\n                    url: '',\n                    targetUser: '', //目标用户 多个之间用逗号隔开 为空表示所有用户\n                    startTime: '', //时间精确到分钟\n                    endTime: '',\n                    fileList: [],\n                    visible: true,\n                    titlemsg: '', //标题框提示信息\n                    protocolmsg: '',\n                    fileListmsg: '',\n                    datemsg: ''\n                };\n            });\n        };\n\n        _this.handleOk = function () {\n            if (!_this.state.title) {\n                _this.setState({ titlemsg: '标题不允许为空' });\n                return;\n            }\n            if (!_this.state.protocol) {\n                _this.setState({ protocolmsg: '跳转协议不允许为空' });\n                return;\n            }\n            if (!_this.state.url) {\n                _this.setState({ fileListmsg: '图片不允许为空' });\n                return;\n            }\n            if (!_this.state.startTime) {\n                _this.setState({ datemsg: '有效期不允许为空' });\n                return;\n            }\n            _this.saveInfo();\n            //验证是否保存成功\n            setTimeout(function () {\n                if (_this.state.success === true) {\n                    alert(_this.state.msg);\n                    return;\n                }\n                _this.setState({ visible: false });\n            }, 500);\n            location.reload(true);\n        };\n\n        _this.handleCancel = function () {\n            if (_this.state.operateType === '新增') {\n                if (_this.state.title !== '' || _this.state.protocol !== '' || _this.state.url !== '' || _this.state.targetUser !== '' || _this.state.startTime !== '') {\n                    _this.setState(function () {\n                        return {\n                            toast: true,\n                            toastmsg: '内容已添加'\n                        };\n                    });\n                    return;\n                }\n                //未添加任何内容 直接取消\n                _this.setState(function () {\n                    return {\n                        visible: false\n                    };\n                });\n            }\n\n            if (_this.state.operateType === '编辑') {\n                var data = _this.state.editData;\n                if (data.title != _this.state.title || data.protocol != _this.state.protocol || data.url != _this.state.url || data.targetUser != _this.state.targetUser || data.startTime != _this.state.startTime || data.endTime != _this.state.endTime) {\n                    _this.setState({\n                        toast: true,\n                        toastmsg: '内容已修改'\n                    });\n                    return;\n                }\n                //内容未发生变更 直接取消\n                _this.setState(function () {\n                    return {\n                        visible: false\n                    };\n                });\n            }\n        };\n\n        _this.handleChange = function (info) {\n            var fileList = info.fileList;\n            if (fileList.length === 0) {\n                _this.setState({ url: '' });\n            }\n\n            // 1. Limit the number of uploaded files\n            // Only to show two recent uploaded files, and old ones will be replaced by the new\n            fileList = fileList.slice(-1);\n\n            // 2. Read from response and show file link\n            fileList = fileList.map(function (file) {\n                if (file.response) {\n                    // Component will show file.url as link\n                    file.url = file.response.data;\n                    _this.state.url = file.response.data;\n                    _this.state.fileListmsg = '';\n                }\n                return file;\n            });\n\n            // 3. Filter successfully uploaded files according to response from server\n            fileList = fileList.filter(function (file) {\n                if (file.response) {\n                    console.log(\"file.response.status:\" + file.response.success);\n                    return file.response.success === true;\n                }\n                return true;\n            });\n\n            _this.setState({ fileList: fileList });\n        };\n\n        _this.handleBigPicCancel = function () {\n            _this.setState({\n                previewVisible: false\n            });\n        };\n\n        _this.state = {\n            page: 1,\n            pageSize: 10,\n            openId: '',\n            status: '1', //查找标志  默认为查全部\n            success: true, //用作保存信息成功与否时的状态判断\n            msg: '', //保存失败时表单提示信息\n            operateType: '', //区别新增or编辑\n            visible: false,\n            toast: false, //取消按钮的二次确认弹框\n            toastmsg: '',\n            title: '',\n            protocol: '',\n            url: '',\n            targetUser: '', //目标用户 多个之间用逗号隔开 为空表示所有用户\n            startTime: '', //时间精确到分钟\n            endTime: '',\n            fileList: [],\n            titlemsg: '', //标题框提示信息\n            protocolmsg: '',\n            fileListmsg: '',\n            datemsg: '',\n\n            previewImageUrl: '', //查看大图\n            previewVisible: false\n        };\n        console.log(\"页面构建方法....\");\n        return _this;\n    }\n\n    //删除\n\n\n    //编辑\n\n\n    //todo 设置显示状态及所传参数\n\n\n    //todo 点击对话框OK按钮触发的事件\n\n\n    //todo 点击对话框取消按钮触发的事件\n\n\n    //todo 上传图片\n\n\n    //todo 关闭查看大图\n\n\n    ActivityScreen.prototype.render = function render() {\n        var _this2 = this;\n\n        if (!this.stateAlready) {\n            return null;\n        }\n\n        var uploadFile = {\n            action: 'uploadAPI/uploadPic.json',\n            onChange: this.handleChange.bind(this),\n            multiple: true,\n            accept: 'image/jpeg,image/jpeg,image/x-png,image/gif'\n        };\n\n        //列表标题\n        var columns = [{ title: '标题', dataIndex: 'title', width: '20%', key: 'title' }, {\n            title: '图片', dataIndex: 'pic', width: '15%', key: 'pic',\n            render: function render(text, record) {\n                return (0, _jsx3.default)('img', {\n                    src: record.url,\n                    onClick: function onClick() {\n                        _this2.setState({\n                            previewVisible: true,\n                            previewImageUrl: record.url\n                        });\n                    },\n                    width: '100px',\n                    height: '150px'\n                });\n            }\n        }, { title: '创建时间', dataIndex: 'dateCreat', width: '20%', key: 'dateCreat' }, { title: '有效期', dataIndex: 'period', width: '25%', key: 'period' }, { title: '状态', dataIndex: 'status', width: '10%', key: 'status' }, {\n            title: '操作',\n            key: 'operating',\n            width: '20%',\n            dataIndex: 'operating',\n            render: function render(text, record) {\n                return (0, _jsx3.default)('span', {}, void 0, (0, _jsx3.default)('a', {\n                    href: '#',\n                    onClick: function onClick() {\n                        return _this2.onEdit(record.id);\n                    }\n                }, void 0, '\\u7F16\\u8F91'), _ref, (0, _jsx3.default)(_antd.Popconfirm, {\n                    title: '\\u786E\\u5B9A\\u5220\\u9664?',\n                    okText: '\\u786E\\u5B9A',\n                    cancelText: '\\u53D6\\u6D88',\n                    onConfirm: function onConfirm() {\n                        return _this2.onDelete(record.id);\n                    }\n                }, void 0, _ref2));\n            }\n        }];\n\n        return (0, _jsx3.default)(_CMSHeader2.default, {}, void 0, (0, _jsx3.default)('div', {}, void 0, (0, _jsx3.default)(_antd.Form, {\n            layout: 'inline'\n        }, void 0, (0, _jsx3.default)(FormItem, {}, void 0, (0, _jsx3.default)(RadioGroup, {\n            defaultValue: '1',\n            onChange: function onChange(e) {\n                _this2.setState({\n                    page: 1,\n                    pageSize: 10,\n                    status: e.target.value\n                }, function () {\n                    return _this2.getList();\n                });\n            }\n        }, void 0, _ref3, _ref4, _ref5, _ref6)), (0, _jsx3.default)(FormItem, {}, void 0, (0, _jsx3.default)(_antd.Button, {\n            type: 'primary',\n            onClick: function onClick() {\n                return _this2.addButton();\n            }\n        }, void 0, '\\u65B0\\u589E'))), (0, _jsx3.default)('div', {}, void 0, (0, _jsx3.default)('div', {\n            className: 'table-content'\n        }, void 0, (0, _jsx3.default)(_antd.Table, {\n            columns: columns,\n            dataSource: this.state.rowData.item,\n            pagination: false\n        })), (0, _jsx3.default)('div', {\n            className: 'table-pagination'\n        }, void 0, (0, _jsx3.default)(_antd.Pagination, {\n            showQuickJumper: true,\n            defaultCurrent: 1,\n            total: this.state.rowData.total,\n            defaultPageSize: 10,\n            onChange: function onChange(page) {\n                (_this2.state.page = page) && _this2.getList();\n            }\n        })))), (0, _jsx3.default)('div', {}, void 0, (0, _jsx3.default)(_antd.Modal, {\n            onOk: this.handleOk,\n            onCancel: this.handleCancel,\n            okText: '保存',\n            cancelText: '取消',\n            visible: this.state.visible,\n            title: this.state.operateType + '|活动浮窗'\n        }, void 0, (0, _jsx3.default)(_antd.Form, {}, void 0, (0, _jsx3.default)('table', {}, void 0, (0, _jsx3.default)('tbody', {}, void 0, (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }, void 0, _ref7), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)(_antd.Input, {\n            type: 'text',\n            id: 'title',\n            onChange: function onChange(e) {\n                _this2.setState({\n                    title: e.target.value,\n                    titlemsg: ''\n                });\n            },\n            value: this.state.title\n        })), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, '*'))), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, this.state.titlemsg)), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }, void 0, _ref8), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)(_antd.Input, {\n            type: 'text',\n            id: 'protocol',\n            onChange: function onChange(e) {\n                _this2.setState({\n                    protocol: e.target.value,\n                    protocolmsg: ''\n                });\n            },\n            value: this.state.protocol\n        })), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, '*'))), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, this.state.protocolmsg)), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, '*\\u652F\\u6301http\\u534F\\u8BAE\\u548C\\u672C\\u5730\\u8DF3\\u8F6C\\u534F\\u8BAE')), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }, void 0, _ref9), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, _react2.default.createElement(\n            _antd.Upload,\n            (0, _extends3.default)({}, uploadFile, { fileList: this.state.fileList }),\n            _ref10\n        )), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, '*'))), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, this.state.fileListmsg)), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }, void 0, _ref11), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)(_antd.Input, {\n            type: 'text',\n            id: 'targetUser',\n            onChange: function onChange(e) {\n                _this2.setState({ targetUser: e.target.value });\n            },\n            value: this.state.targetUser\n        })), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('label', {\n            style: { color: 'red' }\n        }, void 0, '*\\u7528\\u9017\\u53F7\\u9694\\u5F00\\uFF0C\\u4E0D\\u586B\\u9ED8\\u8BA4\\u4E3A\\u6240\\u6709\\u7528\\u6237')), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        })), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }, void 0, _ref12), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)(RangePicker, {\n            value: [this.state.startTime ? (0, _moment2.default)(this.state.startTime, 'YYYY-MM-DD HH:mm') : null, this.state.endTime ? (0, _moment2.default)(this.state.endTime, 'YYYY-MM-DD HH:mm') : null],\n            showTime: { format: 'HH:mm' },\n            showToday: true,\n            format: 'YYYY-MM-DD HH:mm',\n            placeholder: ['开始时间', '结束时间'],\n            onChange: function onChange(dates, dateStrings) {\n                if (dateStrings.length > 0) {\n                    _this2.setState({\n                        datemsg: '',\n                        startTime: dateStrings[0],\n                        endTime: dateStrings[1]\n                    });\n                }\n            },\n            onOk: function onOk() {}\n        })), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, '*'))), (0, _jsx3.default)('tr', {}, void 0, (0, _jsx3.default)('td', {\n            style: { width: '20%' }\n        }), (0, _jsx3.default)('td', {\n            style: { width: '79%' }\n        }, void 0, (0, _jsx3.default)('lable', {\n            style: { color: 'red' }\n        }, void 0, this.state.datemsg)), (0, _jsx3.default)('td', {\n            style: { width: '1%' }\n        }))))))), (0, _jsx3.default)('div', {}, void 0, (0, _jsx3.default)(_antd.Modal, {\n            title: '确认取消提示',\n            okText: '确定',\n            cancelText: '取消',\n            visible: this.state.toast,\n            onOk: function onOk() {\n                _this2.setState({\n                    toast: false,\n                    visible: false\n                });\n            },\n            onCancel: function onCancel() {\n                _this2.setState({\n                    toast: false\n                });\n            }\n        }, void 0, (0, _jsx3.default)('label', {}, void 0, this.state.toastmsg, '\\uFF0C\\u786E\\u5B9A\\u53D6\\u6D88\\u5417\\uFF1F'))), (0, _jsx3.default)('div', {}, void 0, (0, _jsx3.default)(_antd.Modal, {\n            visible: this.state.previewVisible,\n            footer: null,\n            onCancel: this.handleBigPicCancel\n        }, void 0, (0, _jsx3.default)('img', {\n            alt: 'example',\n            style: { width: '100%', height: '100%' },\n            src: this.state.previewImageUrl\n        }))));\n    };\n\n    return ActivityScreen;\n}(_sad2.default);\n\n_reactDom2.default.render((0, _jsx3.default)(ActivityScreen, {}), document.querySelector(\"#content\"));\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/ActivityScreen.jsx\n// module id = 823\n// module chunks = 8\n\n//# sourceURL=webpack:///./pages/ActivityScreen.jsx?")}},[823]);