<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.souche.bmgateway.core.dao.OrderShareApplyMapper" >
  <resultMap id="BaseResultMap" type="com.souche.bmgateway.core.domain.OrderShareApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="out_trade_no" property="outTradeNo" jdbcType="VARCHAR" />
    <result column="req_msg_id" property="reqMsgId" jdbcType="VARCHAR" />
    <result column="payment_order_no" property="paymentOrderNo" jdbcType="VARCHAR" />
    <result column="tm_order_no" property="tmOrderNo" jdbcType="VARCHAR" />
    <result column="merchant_id" property="merchantId" jdbcType="VARCHAR" />
    <result column="member_id" property="memberId" jdbcType="VARCHAR" />
    <result column="relate_order_no" property="relateOrderNo" jdbcType="VARCHAR" />
    <result column="share_order_no" property="shareOrderNo" jdbcType="VARCHAR" />
    <result column="share_date" property="shareDate" jdbcType="VARCHAR" />
    <result column="total_amount" property="totalAmount" jdbcType="VARCHAR" />
    <result column="currency" property="currency" jdbcType="VARCHAR" />
    <result column="payer_fund_details" property="payerFundDetails" jdbcType="VARCHAR" />
    <result column="payee_fund_details" property="payeeFundDetails" jdbcType="VARCHAR" />
    <result column="apply_status" property="applyStatus" jdbcType="VARCHAR" />
    <result column="notify_status" property="notifyStatus" jdbcType="VARCHAR" />
    <result column="query_times" property="queryTimes" jdbcType="INTEGER" />
    <result column="ext_info" property="extInfo" jdbcType="VARCHAR" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
    <result column="extension" property="extension" jdbcType="VARCHAR" />
    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, out_trade_no, req_msg_id, payment_order_no, tm_order_no, merchant_id, member_id, 
    relate_order_no, share_order_no, share_date, total_amount, currency, payer_fund_details, 
    payee_fund_details, apply_status, notify_status, query_times, ext_info, memo, extension, 
    gmt_create, gmt_modified
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_order_share_apply
    where id = #{id,jdbcType=BIGINT}
  </select>
  <select id="selectByOutTradeNo" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from t_order_share_apply
    where out_trade_no = #{outTradeNo,jdbcType=VARCHAR}
  </select>
  <select id="selectNotSuccessStatus" resultMap="BaseResultMap" >
    select
    <include refid="Base_Column_List" />
    from t_order_share_apply
    where notify_status != 'S'
    <if test="queryTimes != null">
      AND query_times &lt;  #{queryTimes,jdbcType=INTEGER}
    </if>
      AND TIMESTAMPDIFF(MINUTE,gmt_create,now()) &lt; 60
    LIMIT #{count,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_order_share_apply
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.souche.bmgateway.core.domain.OrderShareApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_order_share_apply (id, out_trade_no, req_msg_id, 
      payment_order_no, tm_order_no, merchant_id, 
      member_id, relate_order_no, share_order_no, 
      share_date, total_amount, currency, 
      payer_fund_details, payee_fund_details, apply_status, 
      notify_status, query_times, ext_info, 
      memo, extension, gmt_create, 
      gmt_modified)
    values (#{id,jdbcType=BIGINT}, #{outTradeNo,jdbcType=VARCHAR}, #{reqMsgId,jdbcType=VARCHAR}, 
      #{paymentOrderNo,jdbcType=VARCHAR}, #{tmOrderNo,jdbcType=VARCHAR}, #{merchantId,jdbcType=VARCHAR}, 
      #{memberId,jdbcType=VARCHAR}, #{relateOrderNo,jdbcType=VARCHAR}, #{shareOrderNo,jdbcType=VARCHAR}, 
      #{shareDate,jdbcType=VARCHAR}, #{totalAmount,jdbcType=VARCHAR}, #{currency,jdbcType=VARCHAR}, 
      #{payerFundDetails,jdbcType=VARCHAR}, #{payeeFundDetails,jdbcType=VARCHAR}, #{applyStatus,jdbcType=VARCHAR}, 
      #{notifyStatus,jdbcType=VARCHAR}, #{queryTimes,jdbcType=INTEGER}, #{extInfo,jdbcType=VARCHAR}, 
      #{memo,jdbcType=VARCHAR}, #{extension,jdbcType=VARCHAR},
      now(), now())
  </insert>
  <insert id="insertSelective" parameterType="com.souche.bmgateway.core.domain.OrderShareApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_order_share_apply
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="outTradeNo != null" >
        out_trade_no,
      </if>
      <if test="reqMsgId != null" >
        req_msg_id,
      </if>
      <if test="paymentOrderNo != null" >
        payment_order_no,
      </if>
      <if test="tmOrderNo != null" >
        tm_order_no,
      </if>
      <if test="merchantId != null" >
        merchant_id,
      </if>
      <if test="memberId != null" >
        member_id,
      </if>
      <if test="relateOrderNo != null" >
        relate_order_no,
      </if>
      <if test="shareOrderNo != null" >
        share_order_no,
      </if>
      <if test="shareDate != null" >
        share_date,
      </if>
      <if test="totalAmount != null" >
        total_amount,
      </if>
      <if test="currency != null" >
        currency,
      </if>
      <if test="payerFundDetails != null" >
        payer_fund_details,
      </if>
      <if test="payeeFundDetails != null" >
        payee_fund_details,
      </if>
      <if test="applyStatus != null" >
        apply_status,
      </if>
      <if test="notifyStatus != null" >
        notify_status,
      </if>
      <if test="queryTimes != null" >
        query_times,
      </if>
      <if test="extInfo != null" >
        ext_info,
      </if>
      <if test="memo != null" >
        memo,
      </if>
      <if test="extension != null" >
        extension,
      </if>
      <if test="gmtCreate != null" >
        gmt_create,
      </if>
      <if test="gmtModified != null" >
        gmt_modified,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="outTradeNo != null" >
        #{outTradeNo,jdbcType=VARCHAR},
      </if>
      <if test="reqMsgId != null" >
        #{reqMsgId,jdbcType=VARCHAR},
      </if>
      <if test="paymentOrderNo != null" >
        #{paymentOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="tmOrderNo != null" >
        #{tmOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="merchantId != null" >
        #{merchantId,jdbcType=VARCHAR},
      </if>
      <if test="memberId != null" >
        #{memberId,jdbcType=VARCHAR},
      </if>
      <if test="relateOrderNo != null" >
        #{relateOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="shareOrderNo != null" >
        #{shareOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="shareDate != null" >
        #{shareDate,jdbcType=VARCHAR},
      </if>
      <if test="totalAmount != null" >
        #{totalAmount,jdbcType=VARCHAR},
      </if>
      <if test="currency != null" >
        #{currency,jdbcType=VARCHAR},
      </if>
      <if test="payerFundDetails != null" >
        #{payerFundDetails,jdbcType=VARCHAR},
      </if>
      <if test="payeeFundDetails != null" >
        #{payeeFundDetails,jdbcType=VARCHAR},
      </if>
      <if test="applyStatus != null" >
        #{applyStatus,jdbcType=VARCHAR},
      </if>
      <if test="notifyStatus != null" >
        #{notifyStatus,jdbcType=VARCHAR},
      </if>
      <if test="queryTimes != null" >
        #{queryTimes,jdbcType=INTEGER},
      </if>
      <if test="extInfo != null" >
        #{extInfo,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="extension != null" >
        #{extension,jdbcType=VARCHAR},
      </if>
      <if test="gmtCreate != null" >
        #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null" >
        #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.souche.bmgateway.core.domain.OrderShareApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_order_share_apply
    <set >
      <if test="outTradeNo != null" >
        out_trade_no = #{outTradeNo,jdbcType=VARCHAR},
      </if>
      <if test="reqMsgId != null" >
        req_msg_id = #{reqMsgId,jdbcType=VARCHAR},
      </if>
      <if test="paymentOrderNo != null" >
        payment_order_no = #{paymentOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="tmOrderNo != null" >
        tm_order_no = #{tmOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="merchantId != null" >
        merchant_id = #{merchantId,jdbcType=VARCHAR},
      </if>
      <if test="memberId != null" >
        member_id = #{memberId,jdbcType=VARCHAR},
      </if>
      <if test="relateOrderNo != null" >
        relate_order_no = #{relateOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="shareOrderNo != null" >
        share_order_no = #{shareOrderNo,jdbcType=VARCHAR},
      </if>
      <if test="shareDate != null" >
        share_date = #{shareDate,jdbcType=VARCHAR},
      </if>
      <if test="totalAmount != null" >
        total_amount = #{totalAmount,jdbcType=VARCHAR},
      </if>
      <if test="currency != null" >
        currency = #{currency,jdbcType=VARCHAR},
      </if>
      <if test="payerFundDetails != null" >
        payer_fund_details = #{payerFundDetails,jdbcType=VARCHAR},
      </if>
      <if test="payeeFundDetails != null" >
        payee_fund_details = #{payeeFundDetails,jdbcType=VARCHAR},
      </if>
      <if test="applyStatus != null" >
        apply_status = #{applyStatus,jdbcType=VARCHAR},
      </if>
      <if test="notifyStatus != null" >
        notify_status = #{notifyStatus,jdbcType=VARCHAR},
      </if>
      <if test="queryTimes != null" >
        query_times = #{queryTimes,jdbcType=INTEGER},
      </if>
      <if test="extInfo != null" >
        ext_info = #{extInfo,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        memo = #{memo,jdbcType=VARCHAR},
      </if>
      <if test="extension != null" >
        extension = #{extension,jdbcType=VARCHAR},
      </if>
      <if test="gmtCreate != null" >
        gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null" >
        gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.souche.bmgateway.core.domain.OrderShareApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_order_share_apply
    set out_trade_no = #{outTradeNo,jdbcType=VARCHAR},
      req_msg_id = #{reqMsgId,jdbcType=VARCHAR},
      payment_order_no = #{paymentOrderNo,jdbcType=VARCHAR},
      tm_order_no = #{tmOrderNo,jdbcType=VARCHAR},
      merchant_id = #{merchantId,jdbcType=VARCHAR},
      member_id = #{memberId,jdbcType=VARCHAR},
      relate_order_no = #{relateOrderNo,jdbcType=VARCHAR},
      share_order_no = #{shareOrderNo,jdbcType=VARCHAR},
      share_date = #{shareDate,jdbcType=VARCHAR},
      total_amount = #{totalAmount,jdbcType=VARCHAR},
      currency = #{currency,jdbcType=VARCHAR},
      payer_fund_details = #{payerFundDetails,jdbcType=VARCHAR},
      payee_fund_details = #{payeeFundDetails,jdbcType=VARCHAR},
      apply_status = #{applyStatus,jdbcType=VARCHAR},
      notify_status = #{notifyStatus,jdbcType=VARCHAR},
      query_times = #{queryTimes,jdbcType=INTEGER},
      ext_info = #{extInfo,jdbcType=VARCHAR},
      memo = #{memo,jdbcType=VARCHAR},
      extension = #{extension,jdbcType=VARCHAR},
      gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=BIGINT}
  </update>

  <update id="updateApplyStatusByOutTradeNo" parameterType="java.lang.String">
    update t_order_share_apply
    set apply_status = #{applyStatus,jdbcType=VARCHAR}
    where out_trade_no = #{outTradeNo,jdbcType=VARCHAR}
  </update>
  <update id="updateShareOrderNo" parameterType="java.lang.String">
    update t_order_share_apply
    set share_order_no = #{shareOrderNo,jdbcType=VARCHAR}
    where out_trade_no = #{outTradeNo,jdbcType=VARCHAR}
  </update>
  <update id="updateShareApplyResult" parameterType="java.lang.String">
    update t_order_share_apply
    set share_order_no = #{shareOrderNo,jdbcType=VARCHAR},
     apply_status = #{applyStatus,jdbcType=VARCHAR},
     extension = #{extension,jdbcType=VARCHAR}
    where out_trade_no = #{outTradeNo,jdbcType=VARCHAR}
  </update>
  <update id="updateShareNotifyResult" parameterType="java.lang.String">
    update t_order_share_apply
    set share_date = #{shareDate,jdbcType=VARCHAR},
     notify_status = #{notifyStatus,jdbcType=VARCHAR}
    where out_trade_no = #{outTradeNo,jdbcType=VARCHAR}
  </update>
</mapper>